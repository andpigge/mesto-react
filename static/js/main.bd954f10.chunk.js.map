{"version":3,"sources":["images/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","images/icons/profile-btn-edit.svg","contexts/cardListContext.js","components/Main.js","components/Footer.js","components/ImagePopup.js","components/PopupWithForm.js","contexts/validationFormContext.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ConfirmRemove.js","utils/api.js","utils/constants.js","images/gif/preloaderProfileImg.gif","components/App.js","reportWebVitals.js","index.js"],"names":["Header","className","href","target","src","logo","alt","CurrentUserContext","React","createContext","Card","card","onCardClick","onCardLike","onCardDelete","owner","link","name","likes","_id","useContext","onClick","length","some","like","type","CardListContext","Main","onEditAvatar","onEditProfile","onAddPlace","avatar","about","cardList","style","backgroundImage","profileEditImg","map","Footer","ImagePopup","nameSelector","isOpen","onClose","e","PopupWithForm","title","children","onSubmit","ValidationFormContext","validationObj","minLength","maxLength","item","fieldType","startsWith","validetionUrl","validation","value","lengthIsValid","fieldTypeValid","EditProfilePopup","onUpdateUser","loading","useState","profileName","profileDoes","profileValue","setProfileValue","isValidProfileName","setValidProfileName","isValidProfileDoes","setValidProfileDoes","useEffect","handleChange","state","previousValue","Object","assign","preventDefault","id","placeholder","required","onChange","borderBottom","disabled","opacity","EditAvatarPopup","onUpdateAvatar","inputRef","useRef","current","ref","AddPlacePopup","placeName","setPlaceName","placeImg","setPlaceImg","isValidPlaceName","setValidPlaceName","isValidPlaceUrl","setValidPlaceUrl","ConfirmRemove","onRemoveCard","CONECT_SERVER","TOKEN","COHORT_ID","PATHS","user","cards","cardLikes","baseUrl","headers","paths","this","res","ok","json","Promise","reject","status","path","fetch","then","_checkResponse","method","body","JSON","stringify","dataItem","_serverConnectionGet","_serverConnectionSend","cardId","_serverConnectionEdit","avatarUrl","authorization","App","selectedCard","setselectedCard","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isShowPopupImg","setShowPopupImg","isConfirmPoppup","setConfirmPoppup","cardRemove","setCardRemove","gifPreloader","currentUser","setCurrentUser","setCardList","isLoadingData","setIsLoadingData","closeAllPopups","all","Api","getInitialUser","getInitialCards","closePopupTouchEsc","key","document","addEventListener","removeEventListener","Provider","idCard","deleteLike","newCard","previousCard","putAppendLike","addLike","patchUpdateProfile","newUser","finally","patchUpdateUserAvatar","postAddCard","deleteCard","filter","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.bd954f10.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.5f0f2709.svg\";","import logo from '../images/logo.svg';\n\nfunction Header() {\n    return (\n      <header className='header page__position-center page__header'>\n        <a href=\"/index\" target=\"_self\" className=\"header__link\">\n          <img src={logo} alt=\"Место Россия\" className=\"header__logo\" />\n        </a>\n      </header>\n    );\n}\n\nexport default Header;\n","import React from 'react';\n\nexport const CurrentUserContext = React.createContext();\n","import React, { useContext } from 'react';\n\n// Контекст\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction Card({ card, onCardClick, onCardLike, onCardDelete }) {\n  // Деструктуризация\n  const { owner, link, name, likes } = card;\n\n  // Контекст user\n  const { _id } = useContext(CurrentUserContext);\n\n  const toggleClassIcon = () => {\n    // Является ли карточка моей\n    return owner._id === _id ? 'card-place__delete-btn' : 'card-place__delete-btn card-place__delete-btn_display_none';\n  };\n\n  // При монтировании есть ли на карточке лайк\n  const isLiked = () => {\n    // Немного оптимизации. Если к примеру все карточки не будут иметь лайков, то и проверять их незачем\n    if (likes.length > 0) {\n      // Лайкнул карточку или нет\n      const isLiked = likes.some(like => like._id === _id);\n      return isLiked ? 'card-place__like-btn card-place__like-btn_active' : 'card-place__like-btn';\n    }\n    return 'card-place__like-btn';\n  };\n\n  const cardClick = () => {\n    onCardClick(name, link);\n  };\n\n  const cardLike = () => {\n    onCardLike(card)\n  };\n\n  return (\n    <div className=\"card-place\">\n      <button className={ toggleClassIcon() } onClick={() => onCardDelete(card)} />\n      <img src={link} alt={name} className=\"card-place__img\" onClick={cardClick} />\n      <h2 className=\"card-place__title\">\n      {name}\n      </h2>\n      <div className=\"card-place__likes\">\n      <button className={ isLiked() } type=\"button\" onClick={cardLike} />\n      <span className=\"card-place__counter\">{ likes.length }</span>\n      </div>\n    </div>\n  );\n}\n\nexport default Card;\n","export default __webpack_public_path__ + \"static/media/profile-btn-edit.1e29eae2.svg\";","import React from 'react';\n\nexport const CardListContext = React.createContext();\n","import React, { useContext } from 'react';\n\nimport Card from './Card.js';\n\nimport profileEditImg from '../images/icons/profile-btn-edit.svg';\n\n// Контекст\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport { CardListContext } from '../contexts/cardListContext';\n\nfunction Main({onEditAvatar, onEditProfile, onAddPlace, onCardClick, onCardLike, onCardDelete}) {\n\n  // Контекст\n  const { avatar, about, name } = useContext(CurrentUserContext);\n  const cardList = useContext(CardListContext);\n\n  return (\n    <main className=\"content\">\n      <section className=\"profile content__position-center content__profile\">\n        <div className=\"profile__img-container\">\n          <img src={avatar} alt=\"Портрет\" className=\"profile__img\" style={{backgroundImage: `url(${avatar})`}} />\n          <img src={profileEditImg} alt=\"Кнопка редактирования\" className=\"profile__edit-img\" onClick={onEditAvatar} />\n        </div>\n        <div className=\"profile__about\">\n          <div className=\"profile__container-text\">\n            <h1 className=\"profile__title-name\">{about}</h1>\n            <p className=\"profile__subtitle-does\">{name}</p>\n          </div>\n          <button className=\"profile__edit-btn\" type=\"button\" onClick={onEditProfile} />\n        </div>\n        <button className=\"profile__add-card-place\" type=\"button\" onClick={onAddPlace} />\n      </section>\n\n      <section className=\"place content__position-center content__place\">\n        <ul className=\"place__list\">\n          {\n            cardList.length > 0 ?\n            cardList.map(card => {\n              return <li className=\"place__item\" key={card._id}>\n              {/* Передаю уникальный ключ, React сам подставит его. */}\n                <Card card={card} onCardClick={onCardClick} onCardLike={onCardLike} onCardDelete={onCardDelete} />\n              </li>\n            }) :\n            // Это прелоадер\n            <div className='place__result'></div>\n          }\n        </ul>\n      </section>\n    </main>\n  );\n}\n\nexport default Main;\n","function Footer() {\r\n    return (\r\n      <footer className=\"footer page__position-center page__footer\">\r\n        <p className=\"footer__text-copyright\">\r\n          &copy; 2020 Mesto Russia\r\n        </p>\r\n      </footer>\r\n    );\r\n}\r\n\r\nexport default Footer;\r\n","function ImagePopup({card: {name, link}, nameSelector, isOpen, onClose}) {\n  const onClosePopupContainer = e => {\n    if (e.target.className === `popup ${nameSelector} popup_opened`) {\n      onClose();\n    }\n  };\n\n  return (\n    <div className={!isOpen ? `popup ${nameSelector}` : `popup ${nameSelector} popup_opened`} onClick={onClosePopupContainer}>\n      <div className=\"popup__container popup__container_review_img\">\n        <button className=\"popup__btn\" type=\"button\" onClick={onClose}></button>\n        <figure className=\"popup__img-container\">\n          <img src={link} className=\"popup__img\" alt={name} />\n          <figcaption className=\"popup__img-text\">\n            {name}\n          </figcaption>\n        </figure>\n      </div>\n    </div>\n  );\n}\n\nexport default ImagePopup;\n","function PopupWithForm({title, name, isOpen, onClose, children, onSubmit }) {\n\n  const onClosePopupContainer = e => {\n    if (e.target.className === `popup ${name} popup_opened`) {\n      onClose();\n    }\n  };\n\n  return (\n    <>\n      <div className={!isOpen ? `popup ${name}` : `popup ${name} popup_opened`} onClick={onClosePopupContainer} >\n        <div className=\"popup__container\">\n          <button className=\"popup__btn\" type=\"button\" onClick={onClose}></button>\n          <form className=\"popup__form\" name={name} onSubmit={onSubmit}>\n            <h2 className=\"popup__form-title\">\n              {title}\n            </h2>\n            {children}\n          </form>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default PopupWithForm;\n","import {createContext} from 'react';\n\nexport const ValidationFormContext = createContext();\n\nconst validetionUrl = item => {\n  return item.startsWith('https://');\n};\n\nconst validationObj = {\n  length: (minLength, maxLength, item) => {\n    if (minLength > 0) {\n      return item.length > minLength && item.length < maxLength ? true : false;\n    }\n  },\n  fieldType: (type, item) => {\n    switch (type) {\n      case 'url': return validetionUrl(item);\n      default: return true;\n    }\n  }\n};\n\nexport const validation = (value, minLength = 0, maxLength = 10000, fieldType = false) => {\n  validationObj.lengthIsValid = validationObj.length(minLength, maxLength, value);\n  validationObj.fieldTypeValid = validationObj.fieldType(fieldType, value);\n  // console.log(validationObj.fieldTypeValid)\n  // console.log(validationObj.lengthIsValid)\n\n  return validationObj.lengthIsValid && validationObj.fieldTypeValid ? true : false;\n};\n","import React, { useEffect, useState, useContext } from 'react';\nimport PopupWithForm from './PopupWithForm';\n\n// Контекст\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport { ValidationFormContext } from '../contexts/validationFormContext';\n\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser, loading }) {\n  const [profileValue, setProfileValue] = useState({\n    profileName: '',\n    profileDoes: ''\n  });\n  const {profileName, profileDoes} = profileValue;\n\n  const [isValidProfileName, setValidProfileName] = useState(false);\n  const [isValidProfileDoes, setValidProfileDoes] = useState(false);\n\n  // Контекст\n  const { about, name } = useContext(CurrentUserContext);\n  const validation = useContext(ValidationFormContext);\n\n  // Вторым параметром передал переменные зависимости, те что используются в useEffect\n  useEffect(() => {\n    setProfileValue({\n      profileName: about,\n      profileDoes: name\n    });\n  }, [about, name]);\n\n  useEffect(() => {\n    const isValidProfileName = validation(profileValue.profileName, 2, 40);\n    const isValidProfileDoes = validation(profileValue.profileDoes, 2, 200);\n    // console.log(isValidProfileName, isValidProfileDoes)\n\n    setValidProfileName(isValidProfileName);\n    setValidProfileDoes(isValidProfileDoes);\n  }, [profileValue, validation]);\n\n  // Немного усложнил задачу, чтобы потренироваться, понять как реализуется задача по-другому\n  const handleChange = e => {\n    setProfileValue(state => {\n      const previousValue = Object.assign({}, state);\n      previousValue[e.target.name] = e.target.value;\n      return previousValue;\n    });\n  }\n\n  const handleSabmit = e => {\n    e.preventDefault();\n\n    // Передаём значения управляемых компонентов во внешний обработчик\n    onUpdateUser(profileValue);\n  };\n\n  return (\n    <PopupWithForm title={'Редактировать профиль'} name={'popup_edit_profile'} isOpen={isOpen} onClose={onClose} onSubmit={handleSabmit}>\n      <>\n        <label className=\"popup__form-label\">\n          {/* С помощью value и onChange создал управляющий компонент, где содержимое берется из state компонента */}\n          <input type=\"text\" className=\"popup__form-input popup__form-input_value_name\" id=\"profile-name-input\" placeholder=\"Имя\" name=\"profileName\" minLength=\"2\" maxLength=\"40\" required value={profileName} onChange={handleChange} style={{borderBottom: !isValidProfileName ? '1px solid red' : ''}} />\n          <span className={!isValidProfileName ? \"popup__error-message profile-name-input-error popup__error-message_active\" : \"popup__error-message profile-name-input-error\"}>Ошибка валидации</span>\n        </label>\n        <label className=\"popup__form-label\">\n          <input type=\"text\" className=\"popup__form-input popup__form-input_value_does\" id=\"profile-does-input\" placeholder=\"Деятельность\" name=\"profileDoes\" minLength=\"2\" maxLength=\"200\" required value={profileDoes} onChange={handleChange} style={{borderBottom: !isValidProfileDoes ? '1px solid red' : ''}} />\n          <span className={!isValidProfileDoes ? \"popup__error-message profile-does-input-error popup__error-message_active\" : \"popup__error-message profile-does-input-error\"}>Ошибка валидации</span>\n        </label>\n        <button className=\"button-popup button-popup_edit_profile\" type=\"submit\" disabled={isValidProfileName && isValidProfileDoes ? false : true} style={{opacity: !(isValidProfileName && isValidProfileDoes) ? '.2' : ''}}>\n          {loading ? 'Сохранить...' : 'Сохранить'}\n        </button>\n      </>\n    </PopupWithForm>\n  );\n}\n\nexport default EditProfilePopup;\n","import React, { useRef } from 'react';\n\nimport PopupWithForm from './PopupWithForm';\n\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar, loading }) {\n  // Использую рефы\n  const inputRef = useRef();\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    onUpdateAvatar({\n      avatar: inputRef.current.value\n    });\n\n    inputRef.current.value = '';\n  };\n\n  const resetFormFieldsOnClose = () => {\n    onClose();\n    inputRef.current.value = '';\n  }\n\n  return (\n    <PopupWithForm title={'Обновить аватар'} name={'popup_edit_img'} isOpen={isOpen} onClose={resetFormFieldsOnClose} onSubmit={handleSubmit}>\n      <>\n        <label className=\"popup__form-label\">\n          <input type=\"url\" className=\"popup__form-input\" id=\"url-img-edit\" placeholder=\"Ссылка на картинку\" name=\"imgEdit\" required ref={inputRef} />\n          <span className=\"popup__error-message url-img-edit-error\"></span>\n        </label>\n        <button className=\"button-popup button-popup_edit_img\" type=\"submit\" >\n          {loading ? 'Сохранить...' : 'Сохранить'}\n        </button>\n      </>\n    </PopupWithForm>\n  );\n}\n\nexport default EditAvatarPopup;\n","import React, { useState, useEffect, useContext } from 'react';\nimport PopupWithForm from './PopupWithForm';\n\n// Контекст\nimport { ValidationFormContext } from '../contexts/validationFormContext';\n\nfunction AddPlacePopup({ isOpen, onClose, onAddPlace, loading }) {\n  const [placeName, setPlaceName] = useState('');\n  const [placeImg, setPlaceImg] = useState('');\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    onAddPlace ({\n      name: placeName,\n      link: placeImg\n    });\n\n    setPlaceName('');\n    setPlaceImg('');\n  };\n\n  const [isValidPlaceName, setValidPlaceName] = useState('false');\n  const [isValidPlaceUrl, setValidPlaceUrl] = useState('false');\n\n  // Контекст\n  const validation = useContext(ValidationFormContext);\n\n  useEffect(() => {\n    const isValidPlaceName = validation(placeName, 2, 30);\n    const isValidPlaceUrl = validation(placeImg, 1, 10000, 'url');\n\n    setValidPlaceName(isValidPlaceName);\n    setValidPlaceUrl(isValidPlaceUrl);\n  }, [placeName, placeImg, validation]);\n\n  const resetFormFieldsOnClose = () => {\n    onClose();\n    setPlaceName('');\n    setPlaceImg('');\n  }\n\n  return (\n    <PopupWithForm title={'Новое место'} name={'popup_add_card'} isOpen={isOpen} onClose={resetFormFieldsOnClose} onSubmit={handleSubmit}>\n      <>\n        <label className=\"popup__form-label\">\n          <input type=\"text\" className=\"popup__form-input popup__form-input_value_place\" id=\"place-name-input\" placeholder=\"Название\" name=\"placeName\" minLength=\"2\" maxLength=\"30\" required value={placeName} onChange={e => setPlaceName(e.target.value)} style={{borderBottom: !isValidPlaceName ? '1px solid red' : ''}} />\n          <span className={!isValidPlaceName ? \"popup__error-message place-name-input-error popup__error-message_active\" : \"popup__error-message place-name-input-error\"}>Ошибка валидации</span>\n        </label>\n        <label className=\"popup__form-label\">\n          <input type=\"url\" className=\"popup__form-input popup__form-input_value_img\" placeholder=\"Ссылка на картинку\" id=\"place-img-input\" name=\"placeImg\" required value={placeImg} onChange={e => setPlaceImg(e.target.value)} style={{borderBottom: !isValidPlaceUrl ? '1px solid red' : ''}} />\n          <span className={!isValidPlaceUrl ? \"popup__error-message place-img-input-error popup__error-message_active\" : \"popup__error-message place-img-input-error\"}>Ошибка валидации</span>\n        </label>\n        <button className=\"button-popup button-popup_add_card\" type=\"submit\" disabled={isValidPlaceName && isValidPlaceUrl ? false : true} style={{opacity: !(isValidPlaceName && isValidPlaceUrl) ? '.2' : ''}}>\n          {loading ? 'Создать...' : 'Создать'}\n        </button>\n      </>\n    </PopupWithForm>\n  );\n}\n\nexport default AddPlacePopup;\n","import PopupWithForm from './PopupWithForm';\n\nfunction ConfirmRemove({ isOpen, onClose, onRemoveCard, loading }) {\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    onRemoveCard();\n  };\n\n  return (\n    <PopupWithForm title={'Вы уверены?'} name={'popup_remove_card'} isOpen={isOpen} onClose={onClose} onSubmit={handleSubmit}>\n      <>\n        <button className=\"button-popup button-popup_delete_card\" type=\"submit\" >\n          {loading ? 'Да...' : 'Да'}\n        </button>\n      </>\n    </PopupWithForm>\n  );\n}\n\nexport default ConfirmRemove;\n","import {apiServeMesto} from './constants.js';\r\nconst {CONECT_SERVER, TOKEN, COHORT_ID, PATHS} = apiServeMesto;\r\n\r\nclass Api {\r\n  #baseUrl\r\n  #headers\r\n  #pathUser\r\n  #pathCards\r\n  #cardLikes\r\n  constructor({baseUrl, headers, paths: {user, cards, cardLikes}}) {\r\n    this.#baseUrl = baseUrl;\r\n    this.#headers = headers;\r\n    this.#pathUser = user;\r\n    this.#pathCards = cards;\r\n    this.#cardLikes = cardLikes;\r\n  }\r\n\r\n  _checkResponse(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n  }\r\n\r\n  _serverConnectionGet(path) {\r\n    return fetch(`${this.#baseUrl}/${path}`, {\r\n      headers: this.#headers\r\n    })\r\n    .then(this._checkResponse);\r\n  }\r\n\r\n  _serverConnectionSend(path, method, body) {\r\n    return fetch(`${this.#baseUrl}/${path}`, {\r\n      method,\r\n      headers: this.#headers,\r\n      body: JSON.stringify(body)\r\n    })\r\n    .then(this._checkResponse);\r\n  }\r\n\r\n  _serverConnectionEdit(path, method, dataItem) {\r\n    return fetch(`${this.#baseUrl}/${path}/${dataItem}`, {\r\n      method,\r\n      headers: this.#headers\r\n    })\r\n    .then(this._checkResponse);\r\n  }\r\n\r\n\r\n\r\n  getInitialCards() {\r\n    return this._serverConnectionGet(this.#pathCards);\r\n  }\r\n\r\n  getInitialUser() {\r\n    return this._serverConnectionGet(this.#pathUser);\r\n  }\r\n\r\n  patchUpdateProfile(name, about) {\r\n    return this._serverConnectionSend(this.#pathUser, 'PATCH', {\r\n      name,\r\n      about\r\n    });\r\n  }\r\n\r\n  postAddCard(name, link) {\r\n    return this._serverConnectionSend(this.#pathCards, 'POST', {\r\n      name,\r\n      link\r\n    });\r\n  }\r\n\r\n\r\n  deleteCard(cardId) {\r\n    return this._serverConnectionEdit(this.#pathCards, 'DELETE', cardId);\r\n  }\r\n\r\n  putAppendLike(cardId) {\r\n    return this._serverConnectionEdit(this.#cardLikes, 'PUT', cardId);\r\n  }\r\n\r\n  deleteLike(cardId) {\r\n    return this._serverConnectionEdit(this.#cardLikes, 'DELETE', cardId);\r\n  }\r\n\r\n  patchUpdateUserAvatar(avatarUrl) {\r\n    return this._serverConnectionSend(`${this.#pathUser}/avatar`, 'PATCH', {avatar: avatarUrl});\r\n  }\r\n}\r\n\r\nexport default new Api({\r\n  baseUrl: `${CONECT_SERVER}/${COHORT_ID}`,\r\n  headers: {\r\n    authorization: TOKEN,\r\n    'Content-Type': 'application/json'\r\n  },\r\n  paths: PATHS\r\n});\r\n","// Для каждого отдельного сервера, свой apiServe объект\r\nconst apiServeMesto = {\r\n  CONECT_SERVER: 'https://mesto.nomoreparties.co/v1',\r\n  TOKEN: '8e942f57-cf63-4abe-b1a4-d7c8e2f5f3b4',\r\n  COHORT_ID: 'cohort-23',\r\n  PATHS: {\r\n    user: 'users/me',\r\n    cards: 'cards',\r\n    cardLikes: 'cards/likes'\r\n  }\r\n};\r\n\r\nexport {apiServeMesto};\r\n","export default __webpack_public_path__ + \"static/media/preloaderProfileImg.e8e535d6.gif\";","import React, { useEffect } from 'react';\n\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport ImagePopup from './ImagePopup';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport ConfirmRemove from './ConfirmRemove';\n\nimport Api from '../utils/api';\n\n// GIF preloader\nimport gifPreloader from '../images/gif/preloaderProfileImg.gif';\n\n// Контекст\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport { CardListContext } from '../contexts/cardListContext';\nimport {  ValidationFormContext, validation } from '../contexts/validationFormContext';\n\nfunction App() {\n\n  const [selectedCard, setselectedCard] = React.useState({});\n\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = React.useState(false);\n  const [isShowPopupImg, setShowPopupImg] = React.useState(false);\n  const [isConfirmPoppup, setConfirmPoppup] = React.useState(false);\n\n  const [cardRemove, setCardRemove] = React.useState({});\n\n  //* Данные с сервера\n  const [currentUser, setCurrentUser] = React.useState({\n    about: 'Загрузка...',\n    name: 'Пожалуйста подождите',\n    avatar: gifPreloader\n  });\n\n  const [cardList, setCardList] = React.useState([]);\n  //*\n\n  const [isLoadingData, setIsLoadingData] = React.useState(false);\n\n  useEffect(() => {\n    // Данные должны подгружаться одновремено\n    Promise.all([Api.getInitialUser(), Api.getInitialCards()])\n      .then(([ user, cardList ]) => {\n        setCurrentUser(user);\n        setCardList(cardList);\n      });\n  }, []);\n\n  useEffect(() => {\n    const closePopupTouchEsc = e => {\n      if (e.key === 'Escape') {\n        closeAllPopups();\n      }\n    };\n\n    if (isEditProfilePopupOpen || isAddPlacePopupOpen || isEditAvatarPopupOpen || isShowPopupImg) {\n      document.addEventListener('keydown', closePopupTouchEsc);\n    }\n    return () => {\n      document.removeEventListener('keydown', closePopupTouchEsc);\n    };\n  }, [isEditProfilePopupOpen, isAddPlacePopupOpen, isEditAvatarPopupOpen, isShowPopupImg]);\n\n  //*\n  const handleUpdateUser = ({ profileDoes, profileName }) => {\n    setIsLoadingData(true);\n    Api.patchUpdateProfile(profileDoes, profileName)\n      .then(newUser => {\n        setCurrentUser(newUser);\n        closeAllPopups();\n      })\n      .finally(() => {\n        setIsLoadingData(false);\n      });\n  };\n\n  const handleUpdateAvatar = ({ avatar }) => {\n    setIsLoadingData(true);\n    Api.patchUpdateUserAvatar(avatar)\n      .then(newUser => {\n        setCurrentUser(newUser);\n        closeAllPopups();\n      })\n      .finally(() => {\n        setIsLoadingData(false);\n      });\n  };\n\n  const handleAddPlaceSubmit = ({ name, link }) => {\n    Api.postAddCard(name, link)\n      .then(newCard => {\n        setCardList([newCard, ...cardList]);\n        closeAllPopups();\n      });\n  };\n\n  function handleEditAvatarClick() {\n    setEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setAddPlacePopupOpen(true);\n  }\n\n  function handleDeleteCardClick(card) {\n    setConfirmPoppup(true);\n    setCardRemove(card);\n  }\n\n  function closeAllPopups() {\n    setEditAvatarPopupOpen(false);\n    setEditProfilePopupOpen(false);\n    setAddPlacePopupOpen(false);\n    setShowPopupImg(false);\n    setConfirmPoppup(false);\n  }\n\n  function handleCardClick(name, link) {\n    setselectedCard({name, link});\n    setShowPopupImg(true);\n  }\n\n  //* Card\n  const addLike = idCard => {\n    Api.putAppendLike(idCard)\n      .then(newCard => {\n        setCardList(state => {\n          return state.map(previousCard => {\n            return previousCard._id === idCard ? newCard : previousCard;\n          });\n        });\n      });\n  };\n\n  const deleteLike = idCard => {\n    Api.deleteLike(idCard)\n      .then(newCard => {\n        setCardList(state => {\n          return state.map(previousCard => {\n            return previousCard._id === idCard ? newCard : previousCard;\n          });\n        });\n      });\n  };\n\n  const handleCardLike = card => {\n    // true лайк стоит\n    const isLiked = card.likes.some(like => like._id === currentUser._id);\n\n    isLiked ? deleteLike(card._id) : addLike(card._id);\n  };\n  //*\n\n  const handleCardDelete = () => {\n    setIsLoadingData(true);\n    Api.deleteCard(cardRemove._id)\n      .then(newCard => {\n        setCardList(state => {\n          return state.filter(previousCard => {\n            return previousCard._id !== cardRemove._id;\n          });\n        })\n        closeAllPopups();\n    })\n    .finally(() => {\n      setIsLoadingData(false);\n    });\n  };\n\n  return (\n    <CurrentUserContext.Provider value={ currentUser } >\n      <CardListContext.Provider value={ cardList }>\n        <Header />\n        <Main onEditAvatar={handleEditAvatarClick} onEditProfile={handleEditProfileClick} onAddPlace={handleAddPlaceClick} onCardClick={handleCardClick} onCardLike={handleCardLike} onCardDelete={handleDeleteCardClick} />\n        <Footer />\n        <ValidationFormContext.Provider value={ validation }>\n          <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser} loading={isLoadingData} />\n          <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar} loading={isLoadingData} />\n          <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlaceSubmit} loading={isLoadingData} />\n          <ConfirmRemove isOpen={isConfirmPoppup} onClose={closeAllPopups} onRemoveCard={handleCardDelete} loading={isLoadingData} />\n        </ValidationFormContext.Provider>\n\n        <ImagePopup card={selectedCard} name={'popup_edit_img'} isOpen={isShowPopupImg} onClose={closeAllPopups} />\n      </CardListContext.Provider>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\nreportWebVitals();\n"],"sourceRoot":""}